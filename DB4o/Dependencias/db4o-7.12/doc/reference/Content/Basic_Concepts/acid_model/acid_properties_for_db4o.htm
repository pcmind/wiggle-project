<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="2" MadCap:lastHeight="120" MadCap:lastWidth="624" MadCap:disableMasterStylesheet="true" MadCap:tocPath="Basic Concepts|ACID model" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="index.xml" MadCap:SearchType="Stem">
    <head><title>ACID Properties For Db4o	</title>
        <script type="text/javascript">/* <![CDATA[ */
			window.onload = function(){
                             prettyPrint();
			};
                /* ]]> */</script>
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/OnlineStyle.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js">
        </script>
        <script src="../../Resources/Code/prettify.js">
        </script>
        <script src="../../Resources/Code/lang-vb.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../../index_CSH.html#Basic_Concepts/acid_model/acid_properties_for_db4o.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../Basic_Concepts.htm">Basic Concepts</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../acid_model.htm">ACID model</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">ACID Properties For db4o</span>
        </div>
        <p>
            <script type="text/javascript">/*<![CDATA[*/document.write('<a href="' + location.href +'">');
				document.write("Direct Link");
			document.write('</a>');/*]]>*/</script>
        </p>
        <p>
        </p>
        <h1>ACID Properties For Db4o</h1>
        <p>As any
reliable database system db4o ensures <span class="MCPopup"><a href="javascript:void(0);" class="MCPopupSpot" onclick="FMCPopup( event, this ); return false;" MadCap:src="../acid_model.htm">ACID<img style="border: none;margin-left: 5px;" src="../../SkinSupport/ExpandingClosed.gif" MadCap:altsrc="../../SkinSupport/ExpandingOpen.gif" class="MCExpandingIcon" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../../SkinSupport/ExpandingOpen.gif' ); }" /></a></span> transactions. When a commit is
executed, the following order of disc writes is ensured:</p>
        <ol>
            <li value="1">a list of "pointers that
     are to be modified" is written to the database file;</li>
            <li value="2">the database file is switched
     into "in-commit" mode;</li>
            <li value="3">the pointers are actually
     modified in the database file;</li>
            <li value="4">the database file is switched
     to "not-in-commit" mode.</li>
        </ol>
        <p>
            <img src="acid_properties_for_db4o/trnflow_560x231.jpg" style="width: 560; height: 231;" />
        </p>
        <p>As you
can see from the picture above if a fatal failure occurs after the stage 1, the
database will be restored to its pre-transaction consistent state. If the
failure occurs after any other stage, the transaction information will be
available from the transaction commit record and the commit will be restarted
when the database will be open again.


</p>
        <p>The
isolation in db4o database is at degree one, which means that a transaction
does not overwrite "dirty data" of the other transactions and does not
commit any writes until it completes all its writes (transaction commit
record).</p>
        <p>There are
2 settings that can effect ACID behavior in db4o:</p>
        <ol>
            <li value="1">
                <p MadCap:conditions="Primary.Java,Primary.All languages">
                    <p>Java: </p>
                    <pre class="monospace" xml:space="preserve">RandomAccessFileAdapter randomAccessFileAdapter = new RandomAccessFileAdapter();
                      NonFlushingIoAdapter nonFlushingIoAdapter =
                    new NonFlushingIoAdapter(randomAccessFileAdapter); 
                    CachedIoAdapter cachedIoAdapter =
                    new CachedIoAdapter(nonFlushingIoAdapter);
                    </pre>
                </p>
                <p MadCap:conditions="Global.Primary:java" />
                <p MadCap:conditions="Global.Primary:net" />
                <p>this setting can be potentially dangerous on systems
using in-memory file caching. Instead of carrying out all writes immediately,
the kernel stores data temporally in the buffer cache, waiting to see if it is
possible to group several writes together. Cached file changes can also be
reversed, which can break the ACID model.</p>
            </li>
            <li value="2">
                <p MadCap:conditions="Primary.Java,Primary.All languages">
                    <p>Java: </p>
                    <p><code>configuration.disableCommitRecovery()</code>
                    </p>
                </p>
                <p MadCap:conditions="Global.Primary:java" />
                <p MadCap:conditions="Global.Primary:net" />This setting disables commit recovery when the fatal
failure occurs on stage 2-3 of the commit process. This setting should only be
used in emergency situations after consulting db4o support. The ACID flow of
the commit can be re-enabled after restoring the original configuration.</li>
        </ol>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>