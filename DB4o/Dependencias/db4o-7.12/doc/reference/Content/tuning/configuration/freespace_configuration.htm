<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="2" MadCap:lastHeight="120" MadCap:lastWidth="624" MadCap:disableMasterStylesheet="true" MadCap:tocPath="Tuning|Configuration" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="index.xml" MadCap:SearchType="Stem">
    <head><title>Freespace Configuration	</title>
        <script type="text/javascript">/* <![CDATA[ */
			window.onload = function(){
                             prettyPrint();
			};
                /* ]]> */</script>
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/OnlineStyle.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js">
        </script>
        <script src="../../Resources/Code/prettify.js">
        </script>
        <script src="../../Resources/Code/lang-vb.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../../index_CSH.html#tuning/configuration/freespace_configuration.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../tuning.htm">Tuning</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../configuration.htm">Configuration</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Freespace Configuration	</span>
        </div>
        <p>
            <script type="text/javascript">/*<![CDATA[*/document.write('<a href="' + location.href +'">');
				document.write("Direct Link");
			document.write('</a>');/*]]>*/</script>
        </p>
        <p>
        </p>
        <h1>Freespace Configuration</h1>
        <p>When objects are
updated or deleted, the space previously occupied in the database file
is marked as "free". <span class="MCPopup"><a href="javascript:void(0);" class="MCPopupSpot" onclick="FMCPopup( event, this ); return false;" MadCap:src="../../implementation_strategies/freespace_management_system.htm">Freespace<img style="border: none;margin-left: 5px;" src="../../SkinSupport/ExpandingClosed.gif" MadCap:altsrc="../../SkinSupport/ExpandingOpen.gif" class="MCExpandingIcon" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../../SkinSupport/ExpandingOpen.gif' ); }" /></a></span> management system takes care of this space by maintaining two lists in
RAM, sorted by address and by size. The following configuration methods allow to tune the freespace management system to help you optimize your system:</p>
        <p MadCap:conditions="Primary.Java,Primary.All languages">
            <p>Java:  </p>
            <p><code>public void discardSmallerThan(int byteCount);</code>
            </p>
        </p>
        <p MadCap:conditions="Global.Primary:java" />
        <p MadCap:conditions="Global.Primary:net" />
        <p>
            <p>Configures the minimum size of free space slots in the database file that are to 
be reused. </p>
            <p>2 extremes for byteCount value:</p>
            <ul>
                <li value="1">
                    <MadCap:conditionalText MadCap:conditions="Primary.Java">Integer.MAX_VALUE</MadCap:conditionalText> - discard all free slots for the best possible
startup time. The downside: database files will necessarily grow faster</li>
                <li value="2">0
- default setting, all freespace is reused. The downside: increased
memory consumption and performance loss for maintenance of freespace
lists in RAM </li>
            </ul>
        </p>
        <p MadCap:conditions="Primary.Java,Primary.All languages">
            <p>Java:  </p>
            <p><code>public void freespaceFiller(FreespaceFiller freespaceFiller);</code>
            </p>
        </p>
        <p MadCap:conditions="Global.Primary:java" />
        <p MadCap:conditions="Global.Primary:net" />
        <p>This method allows to specify a way to overwrite the freed space in the database. This may be desirable when the information needs to be reliably erased. A <a href="freespace_configuration/freespacefiller_example.htm">custom FreespaceFiller</a> implementation can be created. For an example of db4o implementation of FreespaceFiller you can have a look at XByteFreespaceFiller in the db4o source code (IoAdaptedObjectContainer class). XByteFreespaceFiller overwrites the free space with "XXXX" symbols and is switched on by rebuilding db4o core with debug = true in Deploy class.  </p>
        <p>Note, that using freespace filler will slow down IO operations on the database.</p>
        <p>The following settings allow to select how the freespace information will be kept: </p>
        <p MadCap:conditions="Primary.Java,Primary.All languages">
            <p>Java:  </p>
            <p><code>public void useBTreeSystem();</code>
            </p>
            <p><code>public void useRamSystem();</code>
            </p>
        </p>
        <p MadCap:conditions="Global.Primary:java" />
        <p>
            <p>.NET:  </p>
            <p><code>public void UseBTreeSystem();</code>
            </p>
            <p><code>public void UseRamSystem();</code>
            </p>
            <p>
            </p>
            <p MadCap:conditions="Global.Primary:net" />
        </p>
        <p>When BTree system is used to keep freespace information, the performance is worse as the information is written to disk at each commit, but the memory consumption is lower. With the RAM system, all freespace information is kept in RAM, which allows the best performance, however this information is lost on abnormal system termination.  </p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>