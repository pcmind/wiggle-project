<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="2" MadCap:lastHeight="120" MadCap:lastWidth="624" MadCap:disableMasterStylesheet="true" MadCap:tocPath="Object Lifecycle|Querying|Sorting Query Results" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../../../" MadCap:HelpSystemFileName="index.xml" MadCap:SearchType="Stem">
    <head><title>Evaluation Results Sorting	</title>
        <script type="text/javascript">/* <![CDATA[ */
			window.onload = function(){
                             prettyPrint();
			};
                /* ]]> */</script>
        <link href="../../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/OnlineStyle.css" rel="stylesheet" />
        <script src="../../../SkinSupport/MadCapAll.js">
        </script>
        <script src="../../../Resources/Code/prettify.js">
        </script>
        <script src="../../../Resources/Code/lang-vb.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../../../index_CSH.html#object_lifecycle/querying/sorting_query_results/evaluation_results_sorting.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../../object_lifecycle.htm">Object Lifecycle</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../querying.htm">Querying</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../sorting_query_results.htm">Sorting Query Results</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Evaluation Results Sorting</span>
        </div>
        <p>
            <script type="text/javascript">/*<![CDATA[*/document.write('<a href="' + location.href +'">');
				document.write("Direct Link");
			document.write('</a>');/*]]>*/</script>
        </p>
        <p>
        </p>
        <h1>Evaluation Results Sorting</h1>
        <p>In some cases you may find it necessary to use Evaluations.
There is no standard sorting API for the Evaluation results. But you can sort
the returned result set using standard Java collection API. </p>
        <p>For example, let's retrieve the objects of the Pilot class
<a href="../sorting_query_results.htm">saved before</a>, selecting only pilots with even points and sorting
them according to their name:</p>
        <p MadCap:conditions="Primary.Java,Primary.All languages">
            <pre class="prettyprint" xml:space="preserve">SortingExample.java: getObjectsEval
public static void getObjectsEval()  {

    ObjectContainer container = Db4o.openFile(DB4O_FILE_NAME);
    try  {
      long t1 = System.currentTimeMillis();
      Query query = container.query();
      query.constrain(Pilot.class);
      query.constrain(new Evaluation()  {
        public void evaluate(Candidate candidate)  {
          Pilot pilot = (Pilot) candidate.getObject();
          candidate.include(pilot.getPoints() % 2 == 0);
        }
      });
      List&lt;Pilot&gt; result = new ArrayList&lt;Pilot&gt;(query.execute());
      Collections.sort(result, new Comparator&lt;Pilot&gt;()  {
        public int compare(Pilot p1, Pilot p2)  {
          return p1.getName().compareTo(p2.getName());
        }
      });
      long t2 = System.currentTimeMillis();
      long diff = t2 - t1;
      System.out
          .println("Time to execute with Evaluation query and collection sorting: "
              + diff + " ms.");
      listResult(result);
    } finally  {
      container.close();
    }
  }</pre>
        </p>
        <p MadCap:conditions="Global.Primary:java" />
        <p MadCap:conditions="Global.Primary:cs" />
        <p MadCap:conditions="Global.Primary:vb" />
        <p>This sorting method can be used to sort query results when the sorting can not be added to the query (Evaluations, <span class="MCPopup"><a href="javascript:void(0);" class="MCPopupSpot" onclick="FMCPopup( event, this ); return false;" MadCap:src="../query_by_example.htm">QBE<img style="border: none;margin-left: 5px;" src="../../../SkinSupport/ExpandingClosed.gif" MadCap:altsrc="../../../SkinSupport/ExpandingOpen.gif" class="MCExpandingIcon" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../../../SkinSupport/ExpandingOpen.gif' ); }" /></a></span>). </p>
        <p MadCap:conditions="Primary.Online">Download example code:</p>
        <p MadCap:conditions="Primary.Online">
            <MadCap:conditionalText MadCap:conditions="Primary.Java"><a href="sortingjava.zip">Java </a>
            </MadCap:conditionalText>
        </p>
        <script type="text/javascript" src="../../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>