<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="2" MadCap:lastHeight="120" MadCap:lastWidth="624" MadCap:disableMasterStylesheet="true" MadCap:tocPath="Usage Pitfalls" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../" MadCap:HelpSystemFileName="index.xml" MadCap:SearchType="Stem">
    <head><title>Transparent Activation	</title>
        <script type="text/javascript">/* <![CDATA[ */
			window.onload = function(){
                             prettyPrint();
			};
                /* ]]> */</script>
        <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/OnlineStyle.css" rel="stylesheet" />
        <script src="../SkinSupport/MadCapAll.js">
        </script>
        <script src="../Resources/Code/prettify.js">
        </script>
        <script src="../Resources/Code/lang-vb.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../index_CSH.html#usage_pitfalls/transparent_activation.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../usage_pitfalls.htm">Usage Pitfalls</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Transparent Activation	</span>
        </div>
        <p>
            <script type="text/javascript">/*<![CDATA[*/document.write('<a href="' + location.href +'">');
				document.write("Direct Link");
			document.write('</a>');/*]]>*/</script>
        </p>
        <p>
        </p>
        <h1>Transparent Activation</h1>
        <p><a href="../object_lifecycle/activation/transparent_activation_framework.htm">Transparent Activation</a> is a powerful feature that can
make development much faster, easier and error-proof. But as any power it can
lead to trouble if used in a wrong way. The aim of this chapter is to point you
out to typical pitfalls, which can lead to unexpected and undesired results.</p><a name="Not Activatable Objects"></a>
        <h2>Not Activatable Objects</h2><a name="Problem"></a>
        <h3>Problem </h3>
        <p>When <span class="MCPopup"><a href="javascript:void(0);" class="MCPopupSpot" onclick="FMCPopup( event, this ); return false;" MadCap:src="../object_lifecycle/activation/transparent_activation_framework.htm">TA<img style="border: none;margin-left: 5px;" src="../SkinSupport/ExpandingClosed.gif" MadCap:altsrc="../SkinSupport/ExpandingOpen.gif" class="MCExpandingIcon" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../SkinSupport/ExpandingOpen.gif' ); }" /></a></span> is enabled Activatable objects are activated
transparently on request, whereas not Activatable objects are fully activated.
This is done to keep consistency in persistent objects behaviour. However,
there is a potential danger of activating too many unnecessary objects and
wasting system resources. You will experience lower performance and in the
worst case you can end up with OutOfMemory error. </p><a name="Solution"></a>
        <h3>Solution</h3>
        <p>Make all persistent objects Activatable. This can be done
through using load time (Java only) or build time <span class="MCPopup"><a href="javascript:void(0);" class="MCPopupSpot" onclick="FMCPopup( event, this ); return false;" MadCap:src="../object_lifecycle/activation/transparent_activation_framework.htm">Transparent Activation<img style="border: none;margin-left: 5px;" src="../SkinSupport/ExpandingClosed.gif" MadCap:altsrc="../SkinSupport/ExpandingOpen.gif" class="MCExpandingIcon" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../SkinSupport/ExpandingOpen.gif' ); }" /></a></span>
Enhancement. For more information see <a href="../object_lifecycle/activation/transparent_activation_framework.htm">Transparent Activation Framework</a> documentation.</p><a name="Collections Activation"></a>
        <h2>Collections Activation</h2><a name="Problem"></a>
        <h3>Problem</h3>
        <p>Current implementation of TA Framework does not support lazy
activation of collection members, i.e. the whole collection will be activated
as one object on the first request. However, this only applies to collection
object itself, i.e. Activatable members of the collection will be activated in
a transparent way.</p><a name="Solution"></a>
        <h3>Solution</h3>
        <p>Use db4o proprietary collections: com.db4o.collectections
package in Java and Db4objects.Db4o.Collections in .NET</p><a name="Migrating Between Databases"></a>
        <h2>Migrating Between Databases</h2><a name="Problem"></a>
        <h3>Problem</h3>
        <p>Thansparent <span class="MCPopup"><a href="javascript:void(0);" class="MCPopupSpot" onclick="FMCPopup( event, this ); return false;" MadCap:src="../object_lifecycle/activation.htm">Activation<img style="border: none;margin-left: 5px;" src="../SkinSupport/ExpandingClosed.gif" MadCap:altsrc="../SkinSupport/ExpandingOpen.gif" class="MCExpandingIcon" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../SkinSupport/ExpandingOpen.gif' ); }" /></a></span> is implemented through <code>Activatable/IActivatable</code> interface, which binds an object to the current object container. In a case when an object is stored to more than one object container, this logic won't work, as only one binding (activator) is allowed per object. </p><a name="Solution"></a>
        <h3>Solution</h3>
        <p>To allow correct behavior of the object between databases, the object should be unbinded before being stored to the next database. This can be done with the following code:</p>
        <p MadCap:conditions="Primary.Java,Primary.All languages">
            <p>Java: </p>
            <p><code>myObject.bind(null);</code>
            </p>
        </p>
        <p MadCap:conditions="Global.Primary:java" />
        <p MadCap:conditions="Global.Primary:net" />
        <p>For more information see an <a href="transparent_activation/migrating_between_databases.htm">example</a>. </p>
        <p MadCap:conditions="Primary.Java,Primary.All languages"><a name="Instrumentation Limitations"></a>
            <h2>Instrumentation Limitations</h2><a name="Problem"></a>
            <h3>Problem</h3>
            <p>For Java instrumentation instrumenting classloader must know
the classes to instrument, i.e. all application classes should be on the
classpath. </p><a name="Solution"></a>
            <h3>Solution</h3>
            <p>Make sure that all classes to be instrumented are available
through the classpath</p>
        </p>
        <p MadCap:conditions="Global.Primary:java" /><a name="Debugging Instrumented Classes"></a>
        <h2>Debugging Instrumented Classes</h2><a name="Problem"></a>
        <h3>Problem</h3>
        <p>Debugging instrumented classes may not work 100% correct
both on Java and .NET. Some of the observed problems:</p>
        <ul>
            <li value="1">In
     Visual Studio setting a breakpoint in the area effected by instrumentation
     seems to be not possible</li>
            <li value="2">In
     Eclipse instrumented bytecode might be not displayed correctly in the
     debug mode</li>
        </ul><a name="Solution"></a>
        <h3>Solution</h3>
        <p>You should be able to debug normally anywhere around
instrumented bytecode. If you still think that the problem occurs in the
instrumented area, please submit a bug report to <a href="http://tracker.db4o.com/">db4o Jira</a>.</p>
        <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>